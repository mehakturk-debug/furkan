<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Furkan Tokatla v3</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #0f0f0f;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        /* Sayaç */
        .counter-box {
            font-size: 2.5rem;
            font-weight: bold;
            color: #00ffcc;
            background: #1a1a1a;
            padding: 10px 40px;
            border-radius: 50px;
            margin-bottom: 20px;
            border: 2px solid #00ffcc;
            box-shadow: 0 0 20px rgba(0, 255, 204, 0.2);
        }

        /* Ana Görsel Alanı */
        .main-display {
            position: relative;
            width: 350px;
            height: 350px;
            margin-bottom: 30px;
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            border: 4px solid #ff4757;
        }

        #furkan-img, #main-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        #main-video { display: none; z-index: 2; }
        #furkan-img { z-index: 1; }

        .tokat-btn {
            padding: 15px 50px;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #ff4757, #ff6b81);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.4);
            margin-bottom: 40px;
            transition: 0.2s;
        }

        .tokat-btn:hover { transform: scale(1.05); }
        .tokat-btn:active { transform: scale(0.95); }

        /* Buton Paneli (Altta) */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            width: 100%;
            max-width: 800px;
            background: #1a1a1a;
            padding: 20px;
            border-radius: 20px;
        }

        .num-btn {
            aspect-ratio: 1/1;
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .num-btn:hover { transform: scale(1.1); filter: brightness(1.2); }
    </style>
</head>
<body>

    <div class="counter-box">TOKAT: <span id="counter">0</span></div>

    <div class="main-display">
        <img src="FURKAN.jpeg" id="furkan-img">
        <video id="main-video" playsinline></video>
    </div>

    <button class="tokat-btn" onclick="tokatla()">✋ TOKATLA ✋</button>

    <div class="grid-container" id="grid">
        </div>

    <audio id="tokat-ses" src="TOKAT_SESI.mp3"></audio>
    <audio id="general-audio"></audio>

    <script>
        const img = document.getElementById('furkan-img');
        const vdo = document.getElementById('main-video');
        const tSes = document.getElementById('tokat-ses');
        const gAudio = document.getElementById('general-audio');
        const counterText = document.getElementById('counter');

        let count = parseInt(localStorage.getItem('tokatSayisi')) || 0;
        counterText.innerText = count;

        // TOKATLA FONKSİYONU
        function tokatla() {
            count++;
            counterText.innerText = count;
            localStorage.setItem('tokatSayisi', count);

            playMedia("TOKAT", "mp4");
            tSes.currentTime = 0;
            tSes.play().catch(() => console.log("Tokat sesi bulunamadı."));
        }

        // GENEL MEDYA OYNATMA (Video veya Ses)
        function playMedia(fileName, type) {
            // Her şeyi durdur
            vdo.pause();
            gAudio.pause();
            vdo.style.display = 'none';

            if (type === "mp4") {
                vdo.src = fileName + ".mp4";
                vdo.style.display = 'block';
                vdo.currentTime = 0;
                vdo.play().catch(() => {
                    // Eğer mp4 başarısız olursa mp3 dene (Tokat hariç butonlar için)
                    if(fileName !== "TOKAT") playMedia(fileName, "mp3");
                });
            } else {
                gAudio.src = fileName + ".mp3";
                gAudio.currentTime = 0;
                gAudio.play().catch(() => console.log(fileName + ".mp3 bulunamadı."));
            }

            // Video bittiğinde resmi geri getir
            vdo.onended = () => {
                vdo.style.display = 'none';
            };
        }

        // 30 BUTON OLUŞTURMA
        const grid = document.getElementById('grid');
        for (let i = 1; i <= 30; i++) {
            const b = document.createElement('button');
            b.className = 'num-btn';
            b.innerText = i;
            b.style.backgroundColor = `hsl(${i * 60}, 60%, 45%)`;
            
            b.onclick = () => {
                // Her buton önce video (.mp4) dener, yoksa ses (.mp3) çalar
                playMedia(i, "mp4");
            };
            
            grid.appendChild(b);
        }
    </script>
</body>
</html>
